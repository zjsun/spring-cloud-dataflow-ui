<clr-modal [(clrModalOpen)]="isOpen" class="modal-about stylefix">
  <h3 class="modal-title" i18n="@@about.info.title">About Spring Cloud Data Flow</h3>
  <div class="modal-body" #container>
    <div *ngIf="!loading && about">
      <h3 style="padding-top: 0" i18n="@@about.server.title">Data Flow Server Implementation</h3>
      <ul>
        <li><strong i18n="@@about.server.name">Name</strong>: {{ about.versions.implementation.name || 'n/a' }}</li>
        <li>
          <strong i18n="@@about.server.version">Version</strong>: {{ about.versions.implementation.version || 'n/a' }}
        </li>
      </ul>
      <h3 i18n="@@about.features.title">Features</h3>
      <ul id="enabledFeaturesTable">
        <li>
          <strong i18n="@@about.features.streams">Streams: </strong>
          <clr-icon shape="check" *ngIf="about.features.streams"></clr-icon>
          <clr-icon shape="times" *ngIf="!about.features.streams"></clr-icon>
        </li>
        <li>
          <strong i18n="@@about.features.tasks">Tasks: </strong>
          <clr-icon shape="check" *ngIf="about.features.tasks"></clr-icon>
          <clr-icon shape="times" *ngIf="!about.features.tasks"></clr-icon>
        </li>
        <li>
          <strong i18n="@@about.features.schedules">Schedules: </strong>
          <clr-icon shape="check" *ngIf="about.features.schedules"></clr-icon>
          <clr-icon shape="times" *ngIf="!about.features.schedules"></clr-icon>
        </li>
        <li>
          <strong i18n="@@about.features.monitoring">Monitoring Dashboard: </strong>
          <span *ngIf="about.features.monitoringDashboardType === 'GRAFANA'">Grafana</span>
          <span *ngIf="about.features.monitoringDashboardType === 'WAVEFRONT'">Wavefront</span>
          <clr-icon shape="times" *ngIf="about.features.monitoringDashboardType === 'NONE'"></clr-icon>
        </li>
      </ul>
      <h3 i18n="@@about.security.title">Security</h3>
      <ul>
        <li>
          <strong i18n="@@about.security.authentication.enabled">Authentication Enabled: </strong>
          <clr-icon shape="check" *ngIf="about.security.isAuthentication"></clr-icon>
          <clr-icon shape="times" *ngIf="!about.security.isAuthentication"></clr-icon>
        </li>
        <li>
          <strong i18n="@@about.security.authenticated">Authenticated: </strong>
          <clr-icon shape="check" *ngIf="about.security.isAuthenticated"></clr-icon>
          <clr-icon shape="times" *ngIf="!about.security.isAuthenticated"></clr-icon>
        </li>
        <li *ngIf="about.security.username">
          <strong i18n="@@about.security.username">Username: </strong> {{ about.security.username || 'N/A' }}
        </li>
        <li *ngIf="locale.pub">
          <strong i18n="@@about.security.roles">Roles: </strong>
          <ul>
            <li *ngFor="let role of about.security.roles">
              {{ role }}
            </li>
          </ul>
        </li>
      </ul>
      <h3 i18n="@@about.versions.title">Versions</h3>
      <ul>
        <li>
          <strong i18n="@@about.versions.impl.version">Implementation Version: </strong>
          {{ about.versions.implementation.version }} ({{ about.versions.implementation.name }})
        </li>
        <li>
          <strong i18n="@@about.versions.core">Core: </strong> {{ about.versions.core.version }} ({{
            about.versions.core.name
          }})
        </li>
        <li>
          <strong i18n="@@about.versions.dashboard">Dashboard: </strong> {{ about.versions.dashboard.version }} ({{
            about.versions.dashboard.name
          }})
        </li>
        <li>
          <strong i18n="@@about.versions.shell">Shell: </strong> {{ about.versions.shell.version }} ({{
            about.versions.shell.name
          }})
        </li>
        <li *ngIf="about.versions.shell.checksumSha1">
          <strong i18n="@@about.versions.shell.checksum.sha1">Shell Checksum Sha1: </strong>
          {{ about.versions.shell.checksumSha1 }}
        </li>
        <li *ngIf="about.versions.shell.checksumSha256">
          <strong i18n="@@about.versions.shell.checksum.sha256">Shell Checksum Sha256: </strong>
          {{ about.versions.shell.checksumSha256 }}
        </li>
      </ul>
      <h3 i18n="@@about.skipper.title">Runtime Environment - Skipper Deployer</h3>
      <ul>
        <li>
          <strong i18n="@@about.skipper.version">Implementation Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.deployerImplementationVersion }}
        </li>
        <li>
          <strong i18n="@@about.skipper.name">Name: </strong>
          {{ about.runtimeEnvironment.appDeployer.deployerName || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.spi.version">Spi Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.deployerSpiVersion || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.java.version">Java Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.javaVersion || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.shipper.platform.api.version">Platform Api Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.platformApiVersion || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.platform.client.version">Platform Client Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.platformClientVersion || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.platform.host.version">Platform Host Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.platformHostVersion || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.platform.type">Platform Type: </strong>
          {{ about.runtimeEnvironment.appDeployer.platformType || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.springboot.version">Spring Boot Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.springBootVersion || 'N/A' }}
        </li>
        <li>
          <strong i18n="@@about.skipper.spring.version">Spring Version: </strong>
          {{ about.runtimeEnvironment.appDeployer.springVersion || 'N/A' }}
        </li>
      </ul>
      <h3 i18n="@@about.skipper.platform.specific">Platform-specific Information of the Skipper Deployer</h3>
      <ul>
        <ng-template
          *ngIf="
            about.runtimeEnvironment.appDeployer.platformSpecificInfo &&
            (about.runtimeEnvironment.appDeployer.platformSpecificInfo | keyvalue).length > 0
          "
          ngFor
          let-item
          [ngForOf]="about.runtimeEnvironment.appDeployer.platformSpecificInfo | keyvalue"
        >
          <li>
            <strong>{{ item.key }}: </strong> {{ item.value }}
          </li>
        </ng-template>
        <li
          *ngIf="
            !about.runtimeEnvironment.appDeployer.platformSpecificInfo ||
            (about.runtimeEnvironment.appDeployer.platformSpecificInfo | keyvalue).length === 0
          "
        >
          <strong i18n="@@about.skipper.platform.specific.none">
            No platform-specific app deployer information available.
          </strong>
        </li>
      </ul>
      <div>
        <h3 i18n="@@about.task.title">Runtime Environment - Task Launcher</h3>
        <div>
          <ul *ngIf="!about?.runtimeEnvironment?.taskLaunchers">
            <li><strong i18n="@@about.task.none">No Task Launcher information is available.</strong></li>
          </ul>
          <ul *ngIf="about?.runtimeEnvironment?.taskLaunchers" id="taskLauncherTable">
            <ng-template ngFor let-item [ngForOf]="about.runtimeEnvironment.taskLaunchers">
              <li>
                <strong i18n="@@about.task.impl.version">Implementation Version: </strong>
                {{ item.deployerImplementationVersion }}
              </li>
              <li><strong i18n="@@about.task.name">Name: </strong> {{ item.deployerName }}</li>
              <li><strong i18n="@@about.task.spi.version">Spi Version: </strong> {{ item.deployerSpiVersion }}</li>
              <li><strong i18n="@@about.task.java.version">Java Version: </strong> {{ item.javaVersion }}</li>
              <li>
                <strong i18n="@@about.task.platform.api.version">Platform Api Version: </strong>
                {{ item.platformApiVersion }}
              </li>
              <li>
                <strong i18n="@@about.task.platform.client.version">Platform Client Version: </strong>
                {{ item.platformClientVersion }}
              </li>
              <li>
                <strong i18n="@@about.task.platform.host.version">Platform Host Version: </strong>
                {{ item.platformHostVersion }}
              </li>
              <li><strong i18n="@@about.task.platform.type">Platform Type: </strong> {{ item.platformType }}</li>
              <li>
                <strong i18n="@@about.task.springboot.version">Spring Boot Version: </strong>
                {{ item.springBootVersion }}
              </li>
              <li><strong i18n="@@about.task.spring.version">Spring Version: </strong> {{ item.springVersion }}</li>
              <li>
                <strong i18n="@@about.task.platform.specific"
                  >Platform-specific Information of the Task Launcher</strong
                >
                <ul>
                  <ng-template
                    *ngIf="item.platformSpecificInfo && (item.platformSpecificInfo | keyvalue).length > 0"
                    ngFor
                    let-item
                    [ngForOf]="item.platformSpecificInfo | keyvalue"
                  >
                    <li>
                      <strong>{{ item.key }}: </strong> {{ item.value }}
                    </li>
                  </ng-template>
                  <li *ngIf="!item.platformSpecificInfo || (item.platformSpecificInfo | keyvalue).length === 0">
                    <strong> No platform-specific task launcher information available. </strong>
                  </li>
                </ul>
              </li>
            </ng-template>
          </ul>
        </div>
      </div>
      <ng-container *ngIf="locale.pub">
        <h3>Need Help or Found an Issue?</h3>
        <ul>
          <li>
            <a target="_blank" href="https://cloud.spring.io/spring-cloud-dataflow/">
              <strong>Project Page</strong>: Quick overview of Spring Cloud Data Flow Project.
            </a>
          </li>
          <li>
            <a target="_blank" href="https://github.com/spring-cloud/spring-cloud-dataflow">
              <strong>Source Code</strong>: Spring Cloud Data Flow Project is an Open Source Project.
            </a>
          </li>
          <li>
            <a
              target="_blank"
              href="https://docs.spring.io/spring-cloud-dataflow/docs/{{
                about.versions.core.version
              }}/reference/htmlsingle/"
            >
              <strong>Documentation</strong>: Learn more about the product features.
            </a>
          </li>
          <li>
            <a
              target="_blank"
              href="https://docs.spring.io/spring-cloud-dataflow/docs/{{
                about.versions.core.version
              }}/reference/htmlsingle/#api-guide-resources"
            >
              <strong>API Docs</strong>: Learn more about the REST-APIs.
            </a>
          </li>
          <li>
            <a target="_blank" href="https://stackoverflow.com/questions/tagged/spring-cloud-dataflow">
              <strong>Support Forum</strong>: You need help?
            </a>
          </li>
          <li>
            <a target="_blank" href="https://github.com/spring-cloud/spring-cloud-dataflow/issues">
              <strong>Issue Tracker</strong>: Report an issue or request for a new feature.
            </a>
          </li>
        </ul>
      </ng-container>
    </div>
  </div>
  <div class="modal-footer">
    <button (click)="copyToClipboard()" type="button" class="btn btn-primary" i18n="@@about.info.copy">
      Copy Details to Clipboard
    </button>
  </div>
</clr-modal>
